C51 COMPILER V9.60.7.0   SYS                                                               01/20/2025 18:09:15 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE SYS
OBJECT MODULE PLACED IN .\Objects\sys.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE sys.c OPTIMIZE(8,SPEED) BROWSE INCDIR(..\TEST_U2) DEBUG OBJECTEXTEND PRI
                    -NT(.\Listings\sys.lst) TABS(2) OBJECT(.\Objects\sys.obj)

line level    source

   1          #include "sys.h"
*** WARNING C318 IN LINE 4 OF sys.h: can't open file 'STC15F2K60S2.h'
*** WARNING C318 IN LINE 6 OF sys.h: can't open file 'dsp.h'
   2          
   3          //
   4          void CloseAllPeripheral(void)
   5          {
   6   1          LED(0xFF);
*** ERROR C202 IN LINE 6 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 6 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 6 OF sys.c: 'P2': undefined identifier
   7   1          BUZ(0x00);
*** ERROR C202 IN LINE 7 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 7 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 7 OF sys.c: 'P2': undefined identifier
   8   1          SEG(0xFF);
*** ERROR C202 IN LINE 8 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 8 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 8 OF sys.c: 'P2': undefined identifier
   9   1          COM(0x00);
*** ERROR C202 IN LINE 9 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 9 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 9 OF sys.c: 'P2': undefined identifier
  10   1      }
  11          
  12          //
  13          void OpenAllPeripheral(void)
  14          {
  15   1          LED(0x00);
*** ERROR C202 IN LINE 15 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 15 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 15 OF sys.c: 'P2': undefined identifier
  16   1          BUZ(0xFF);
*** ERROR C202 IN LINE 16 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 16 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 16 OF sys.c: 'P2': undefined identifier
  17   1          SEG(0x00);
*** ERROR C202 IN LINE 17 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 17 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 17 OF sys.c: 'P2': undefined identifier
  18   1          COM(0xFF);
*** ERROR C202 IN LINE 18 OF sys.c: 'P0': undefined identifier
*** ERROR C202 IN LINE 18 OF sys.c: 'P2': undefined identifier
*** ERROR C202 IN LINE 18 OF sys.c: 'P2': undefined identifier
  19   1      }
  20          
  21          
  22          //11.0592MHz
  23          void Delay100Ms(void)
  24          {
  25   1        unsigned char i, j, k;
  26   1      
  27   1        _nop_();
  28   1        _nop_();
C51 COMPILER V9.60.7.0   SYS                                                               01/20/2025 18:09:15 PAGE 2   

  29   1        i = 5;
  30   1        j = 52;
  31   1        k = 195;
  32   1        do
  33   1        {
  34   2          do
  35   2          {
  36   3            while (--k);
  37   3          } while (--j);
  38   2        } while (--i);
  39   1      }
  40          
  41          //11.0592MHz
  42          void Delay10Ms(void)
  43          {
  44   1        unsigned char i, j;
  45   1      
  46   1        i = 108;
  47   1        j = 145;
  48   1        do
  49   1        {
  50   2          while (--j);
  51   2        } while (--i);
  52   1      }
  53          
  54          //
  55          void InitTimer2(void)
  56          {
  57   1          AUXR |= 0x04;
*** ERROR C202 IN LINE 57 OF sys.c: 'AUXR': undefined identifier
  58   1          T2L = 0x20;
*** ERROR C202 IN LINE 58 OF sys.c: 'T2L': undefined identifier
  59   1        T2H = 0xD1;
*** ERROR C202 IN LINE 59 OF sys.c: 'T2H': undefined identifier
  60   1        AUXR |= 0x10;
*** ERROR C202 IN LINE 60 OF sys.c: 'AUXR': undefined identifier
  61   1          IE2 |= 0x04;
*** ERROR C202 IN LINE 61 OF sys.c: 'IE2': undefined identifier
  62   1      }
  63          
  64          //
  65          static unsigned int ms[6];
  66          bdata unsigned char flag = 0;
  67          
  68          void IsrTimer2(void)    interrupt 12
  69          {
  70   1        GetDisplayStruct()->SegDisplay();
  71   1      
  72   1        if(++ms[0] >= 20){
  73   2          ms[0] = 0;
  74   2          flag |= 0x01;
  75   2        }
  76   1      
  77   1        if(++ms[1] == 100){
  78   2          ms[1] = 0;
  79   2          flag |= 0x02;
  80   2        }
  81   1      
  82   1        if(++ms[2] == 500){
  83   2          ms[2] = 0;
  84   2          flag |= 0x04;
  85   2        }
C51 COMPILER V9.60.7.0   SYS                                                               01/20/2025 18:09:15 PAGE 3   

  86   1      
  87   1        if(++ms[3] == 500){
  88   2          ms[3] = 0;
  89   2          flag |= 0x08;
  90   2        }
  91   1      
  92   1        if(++ms[4] == 1000){
  93   2          ms[4] = 0;
  94   2          flag |= 0x10;
  95   2        }
  96   1      
  97   1        if(++ms[5] == 200){
  98   2          ms[5] = 0;
  99   2          flag |= 0x20;
 100   2        }
 101   1      }

C51 COMPILATION COMPLETE.  2 WARNING(S),  29 ERROR(S)
