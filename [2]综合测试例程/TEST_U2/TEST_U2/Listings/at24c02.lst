C51 COMPILER V9.59.0.0   AT24C02                                                           09/26/2025 18:17:36 PAGE 1   


C51 COMPILER V9.59.0.0, COMPILATION OF MODULE AT24C02
OBJECT MODULE PLACED IN .\Objects\at24c02.obj
COMPILER INVOKED BY: D:\Keil5\Keil5.38\C51\BIN\C51.EXE at24c02.c COMPACT OPTIMIZE(8,SPEED) BROWSE INCDIR(..\TEST_U2) DEB
                    -UG OBJECTEXTEND PRINT(.\Listings\at24c02.lst) TABS(2) OBJECT(.\Objects\at24c02.obj)

line level    source

   1          #include "at24c02.h"
   2          
   3          void write_AT24C02(unsigned char addr, unsigned char dat)
   4          {
   5   1          // 发送起始信号
   6   1          I2C_Start();
   7   1          
   8   1          // 发送设备地址加上写操作位
   9   1          I2C_send_byte(AT24C02_ADDR | 0x00); // AT24C02的写地址是基础地址加上0
  10   1          if (!Test_ACK())
  11   1          {
  12   2              // 如果没有收到应答，则退出
  13   2              I2C_Stop();
  14   2              return;
  15   2          }
  16   1          
  17   1          // 发送内存地址
  18   1          I2C_send_byte(addr);
  19   1          if (!Test_ACK())
  20   1          {
  21   2              // 如果没有收到应答，则退出
  22   2              I2C_Stop();
  23   2              return;
  24   2          }
  25   1          
  26   1          // 发送要写入的数据
  27   1          I2C_send_byte(dat);
  28   1          if (!Test_ACK())
  29   1          {
  30   2              // 如果没有收到应答，则退出
  31   2              I2C_Stop();
  32   2              return;
  33   2          }
  34   1          
  35   1          // 发送停止信号
  36   1          I2C_Stop();
  37   1          
  38   1      }
  39          unsigned char read_AT24C02(unsigned char addr)
  40          {
  41   1        unsigned char dat;
  42   1        I2C_Start();
  43   1        I2C_send_byte(AT24C02_ADDR+0);
  44   1        if (!Test_ACK())
  45   1        {
  46   2          return(0);
  47   2        }
  48   1        I2C_send_byte(addr);
  49   1        Master_ACK(0);
  50   1        I2C_Start();
  51   1        I2C_send_byte(AT24C02_ADDR+1);
  52   1        if (!Test_ACK())
  53   1        {
  54   2          return(0);
C51 COMPILER V9.59.0.0   AT24C02                                                           09/26/2025 18:17:36 PAGE 2   

  55   2        }
  56   1        dat = I2C_read_byte();
  57   1        Master_ACK(0);
  58   1        I2C_Stop();
  59   1        return(dat);
  60   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    118    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----       4
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
